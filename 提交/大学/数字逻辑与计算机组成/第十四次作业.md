10. 若主存1MB，高速缓存16KB，按64B分块，cache-MM层次采用全相联映象，问：

    1. MM，cache各分多少块，并画出MM与cache的地址格式，注明各部分的名称和 长度。 
    2. 若由相联存储器实现MM-cache地址变换，问该相联存储器应包含几个单元，每个 单元几位? 
    3. 若cache读写周期为25ns，MM读写周期为250ns，平均命中率为98%，求平均读 写周期。

    

    1. 主存1MB，分块64B，分块数量为$$\frac{2^{20}}{64} = 16384$$ 块

       Cache 16KB，分块数量为$$\frac{2^{14}}{64} = 256$$ 块

       主存地址：|块地址（13位）|块内偏移（6位）|

       Cache地址：|块地址（8位）|块内偏移（6位）|

    2. 需要14位标记块号，1位作为有效位，共计15位

       相联存储器单元数256，大小为15位

    3. $$平均读写周期 = 命中率 \times cache读写周期 + (1 - 命中率) \times (MM读写周期 + cache访问周期)$$

       $$0.98 \times 25 + 0.02 \times (250 + 25) = 24.5 + 5.5 = 30ns$$

    


11. 某虚拟存储器的用户空间共有32个页面，每页1KB，主存16KB。试问： 

    1. 逻辑地址的有效位是多少? 
    2. 物理地址需要多少位？ 
    3. 假定某时刻系统用户的第0、第1、第2、第3页分别分配的物理块号为5，10，4，7，试 将虚地址0A5C和093C变换为物理地址。

    

    1. 

12. 主存（MM）-高速缓冲存储器（Cache）采用直接映射方式，按字节编址，块大小为512字节，高速缓存容量是4K字节，主存容量为64K字节。某个时刻的Cache的部分内容如表1所示，请问：

    1. 高速缓存Cache分成多少块？块地址有多少位？（2分）
    2. 主存分成多少个区？区号有多少位？每个区内有多少块？区内块号占多少位？（4分）
    3. 根据下表Cache的信息分析，访问主存地址7163H和5BCFH，哪个能在Cache命中？如果能命中请给出转换后的Cache地址，否则请说明未命中的原因？(4分)
    4. 根据表1的信息，假设CPU依次访问主存地址是7191H、5BD8H、60EDH和5A03H的4个单元，Cache的命中率是多少？这4次访问中，会发生几次Cache行的替换？（4分）

    | 行号 | 标签（Tag） | 有效位(Valid) |
    | ---- | ----------- | ------------- |
    | 0    | 7H          | 0             |
    | 1    | 1H          | 1             |
    | 2    | 9H          | 1             |
    | 3    | BH          | 1             |
    | 4    | 4H          | 1             |
    | 5    | 5H          | 1             |
    | 6    | 0H          | 0             |
    | 7    | 2H          | 1             |


13. 某计算机内存有1M字节，Cache有4K字节，都按字节进行编址。Cache和内存之间采用直接映射，分块大小是512字节，内存按照Cache大小进行分区。 某个时刻，Cache的相联存储器的1号单元存放的内容是81H，请回答如下问题： 
1. Cache和内存分别有多少个块？内存有多少个分区？
2. Cache的比较电路需要的相联存储器需要多少个单元？每个单元多少位？存放的内容是什么？
3.  CPU如果要访问的数据的内存地址是81376H, 能否命中Cache? 为什么？如果能够命中，则将该内存地址转换为Cache的地址是多少？ 



14. 某计算机内存有1M字节，Cache有4K字节，都按字节进行编址。Cache和内存之间采用全相联映射，分块大小是512字节。 某个时刻，Cache的相联存储器的6号单元存放的内容是409H，请回答如下问题：
1. Cache和内存分别有多少个块？
2. Cache的比较电路需要的相联存储器需要多少个单元？每个单元多少位？
3. CPU如果要访问的数据的内存地址是81376H, 能否命中Cache? 为什么？如果能够命中，则将该内存地址转换为Cache的地址是多少？
