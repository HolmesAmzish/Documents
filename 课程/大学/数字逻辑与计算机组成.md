# 数字逻辑

## 逻辑门基础电路

### 逻辑门

**执行逻辑门函数**

非（NOT），与（AND），或（OR），与非（NAND），或非（NOR），等。

**单输入逻辑门**

NOT gate， buffer

**二输入逻辑门**

AND，OR，XOR，NAND，NOR，XNOR

**多输入逻辑门**

# 计算机组成

## 计算机的基本原理与结构

### 中央处理器

- **运算器**的核心是**算术逻辑运算部件ALU**。内部有若干**寄存器**（如累加寄存器、暂存器）。

- **控制器**主要包括时序控制信号形成部件和专用的寄存器。

### 存储器

存储器有三级存储系统

- **高速缓冲存储器（Cache）**，CPU直接访问，存放正在执行程序的活跃部分（副本），以便快速向CPU提供指令和数据。
- **主存储器**，CPU直接访问，存放当前正在执行的程序和数据。
- **辅助存储器**，主机外部，CPU不能直接访问，存放暂时不参与运算的程序和数据，需要时再传送到主存。

### 输入输出设备I/O

- 输入设备
- 输出设备

### 计算机的主要性能指标

**机器字长**，计算机进行一次整数运算所能处理的二进制数数据的位数，即运算器进行定点数运算的字长，通常也是CPU内部数据通路的宽度，与主存储器字长可以是相同的，也可以不相同，此时一般主存储器子长小于机器字长，会降低CPU工作效率。

**FLOPS（Floationg-point Operations Per Second）**每秒执行多少次浮点运算
$$
FLOPS = \frac{程序中的浮点操作次数}{执行时间}
$$
还有其他表示数量级的前缀，MFLOPS，GHFLOPS……

**CPI（Cycles Per Instruction）**执行每条指令所需的平均时钟周期数
$$
CPI = \frac{执行程序所需时钟周期数}{程序中的指令条数}
$$
**MIPS（Million Instruction Per Second）**单位时间内执行指令的平均条数（以百万为单位）
$$
MIPS = \frac{程序中的指令条数}{程序执行时间\times10^6}
$$
**平均指令周期**是指完成一条指令的时间，不同指令的指令周期不同使用平均指令周期反应执行速度。



## 编码和信息的表示

### 数据的基本宽度

- bit（比特）是计算机信息的最小单位，用来表示0或1
- Byte（字节）是二进制信息的计量单位，8个二进制位整体
  - 现代主流计算机存储器按字节编址
  - 字节是最小可寻址单位
- word（字），机器字长宽度的位组
  - 字长指数据通路的宽度
  - 字用来表示被处理信息的单位

在如下16位字长的计算机中，32位二进制数据`0100_1100_0011_0001_1000_0101_1011`表示一个双字4C31285BH

**最高有效位（MSB）**指数据的最高权重位，**最低有效位（LSB）**指数据的最低权重位。

### 数值数据的表示

**无符号数与带符号数**

所谓无符号数就是整个机器字长的全部二进制均表示数值位（没有符号位）。对于字长n+1位的无符号数的表示范围位 $$0 ~ (2^{n + 1} - 1)$$ ，例如字长为8位，无符号数表示范围是0~255。

带符号数包含正负数和零，用符号与绝对值来表示数值大小，这种形式表示的数值称为**真值**，约定以二进制形式的最高位作为符号位，**0**代表正数或0，**1**代表负号。这种在计算机中使用的形式称为**机器数**。



**纯小数的原码**

| 纯小数  | 原码      |
| ------- | --------- |
| 0.0110  | **0**0110 |
| -0.0110 | **1**0110 |

**纯整数的原码**

| 纯整数 | 原码      |
| ------ | --------- |
| 1101   | **0**1101 |
| -1101  | **1**1101 |

纯整数0有两种不同的原码表示 $$[+0]_原 = 00000,[-0]_原 = 10000$$。

**反码**

最高位表示符号位，数值部分，正数的数值部分与真值形式相反，负数的数值部分为真值按位取反。

## 运算方法与运算器

## 存储器

## 指令系统

## 控制器与中央处理器

### CPU控制器的寄存器

1. **程序计数器 (Program Counter, PC)**
   功能：**存放即将执行的指令的地址**。每次取指令后，PC 的值会自动增加（顺序执行）或更新为跳转地址（分支跳转）。
2. **指令寄存器 (Instruction Register, IR)**
   功能：**存放当前正在执行的指令**。从内存取出的指令被加载到 IR 中以供译码和执行。
3. **存储器地址寄存器 (Memory Address Register, MAR)**
   功能：**存放当前访问的内存单元地址**。无论是读数据还是写数据，操作的地址都由 MAR 指定。
4. **存储器数据寄存器 (Memory Data Register, MDR)**
   功能：**存放从内存读取的数据或写入内存的数据**。即数据在 CPU 和内存之间的临时缓冲区。
5. **程序状态字寄存器 (Program Status Word Register, PSWR)**
   功能：**存放程序的状态信息**，例如条件标志（如零标志、进位标志）、中断标志、模式控制位等。用于反映 CPU 当前的状态和控制程序运行。



## 存储体系

### 高速缓存

**程序局部性原理**，在较短时间间隔内，程序产生的地址往往集中在一个小范围内，这种现象称为**程序访问的局部性**；**时间局部性**指刚被访问过的单元很有可能很快被再次访问，**空间局部性**指刚被访问过的的单元其邻近单元很有可能被很快访问。

**高速缓冲存储器**是在CPU和主存之间引入的高速、小容量存储器，存放主存当前最活跃的程序和数据副本。

CPU与Cache和MM传输数据的单位是**字**，Cache与MM传输数据的单位是**块**。

**Cache地址映像**

- 直接映射：每个主存块映像到Cache的固定行
- 全相联：每个主存块映像到Cache的任一行
- 组相联：每个主存块映像到Cache固定组任一行

$$
平均读写周期 = 命中率 \times cache读写周期 + (1 - 命中率) \times (MM读写周期 + cache访问周期)
$$

