# 抓包与分析

## ping 命令数据包

### 打开Wireshark 进行监听

首先要在全程打开wireshark并选择对应网卡进行监听网络数据包，这样才能抓取发送和接收的数据包。打开wireshark，这里用的是无线网络，所以选定监听WLAN网卡的数据包。此时Wireshark就开始抓取数据包。

### 发送ping 请求

```
PS C:\Users\Holme> ping inferno3.arorms.cn

正在 Ping inferno3.arorms.cn [47.122.24.144] 具有 32 字节的数据:
来自 47.122.24.144 的回复: 字节=32 时间=33ms TTL=49
来自 47.122.24.144 的回复: 字节=32 时间=31ms TTL=49
来自 47.122.24.144 的回复: 字节=32 时间=65ms TTL=49
来自 47.122.24.144 的回复: 字节=32 时间=47ms TTL=49

47.122.24.144 的 Ping 统计信息:
    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 31ms，最长 = 65ms，平均 = 44ms
```

在windows终端中ping目标主机，系统会自动发送四个请求并接受目标主机的回复。这里显示到发送了四个数据包并接收到了四个回复，没有丢包。同时还会看到所用时间和TTL值，表示了延迟和网络路径的长短。

### 检查Wireshark 的数据包

暂停抓包，会发现此时会有在当前网卡抓取到的各种数据包，需要进行筛选。首先根据ping 的结果可以看出地址为47.122.24.144，在过滤器中筛选`ip.addr == 47.122.24.144`

![image-20241026235856800](C:\Users\Holme\AppData\Roaming\Typora\typora-user-images\image-20241026235856800.png)

可以看出八个监听到的数据包，分别是四个发送与接受，可以判断应该是ping 相关的数据包。

### 数据包分析

